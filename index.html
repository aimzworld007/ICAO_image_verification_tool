<!DOCTYPE html>
<html lang="en" class="">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags -->
    <title>Professional ICAO Photo & Document Suite | AI Photo Generator</title>
    <meta name="description" content="Create perfect, ICAO-compliant photos for your Emirates ID, visa, or passport with our AI-powered tool. Verify, edit, enhance, and manage all your application documents online for free.">
    <meta name="keywords" content="ICAO photo, Emirates ID photo, visa photo, passport photo, AI photo generator, photo editor, image upscale, document tool, UAE visa photo, background remover, photo verification">
    <meta name="author" content="Aimzit">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://your-live-url.com/">
    <meta property="og:title" content="Professional ICAO Photo & Document Suite | AI Photo Generator">
    <meta property="og:description" content="Create perfect, ICAO-compliant photos for your Emirates ID, visa, or passport with our AI-powered tool. Verify, edit, and manage documents online for free.">
    <meta property="og:image" content="https://placehold.co/1200x630/3b82f6/ffffff?text=ICAO+Photo+Suite">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://your-live-url.com/">
    <meta property="twitter:title" content="Professional ICAO Photo & Document Suite | AI Photo Generator">
    <meta property="twitter:description" content="Create perfect, ICAO-compliant photos for your Emirates ID, visa, or passport with our AI-powered tool. Verify, edit, and manage documents online for free.">
    <meta property="twitter:image" content="https://placehold.co/1200x630/3b82f6/ffffff?text=ICAO+Photo+Suite">

    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Deferred scripts for faster page load -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.min.js" defer></script>
    <script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js" defer></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
        
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Inter', sans-serif;
            background-color: white;
            transition: background-color 0.3s ease;
        }
        .dark body { background-color: #0f172a; }
        
        .loader {
            border: 5px solid #e2e8f0;
            border-top: 5px solid #2563eb;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        .hidden { display: none; }
        
        .main-card {
            background-color: #f8fafc; /* Softer card color for light mode */
            border: 1px solid #e2e8f0;
            border-radius: 0.75rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.07), 0 4px 6px -2px rgba(0, 0, 0, 0.04);
            transition: all 0.3s ease-in-out;
        }
        .dark .main-card { background-color: #1e293b; border: 1px solid #334155; }

        .tab { 
            cursor: pointer; padding: 0.75rem 1rem; font-weight: 600; color: #475569; border-bottom: 3px solid transparent; 
            transition: all 0.2s; position: relative; top: 1px; white-space: nowrap;
        }
        .dark .tab { color: #94a3b8; }
        .tab:hover { color: #2563eb; }
        .dark .tab:hover { color: #3b82f6; }
        .tab.active { color: #2563eb; border-bottom-color: #2563eb; }
        .dark .tab.active { color: #3b82f6; border-bottom-color: #3b82f6; }
        
        .btn { 
            background-color: #2563eb;
            color: white; padding: 0.75rem 1.5rem; border-radius: 0.5rem; font-weight: 600; cursor: pointer;
            transition: all 0.2s; text-align: center; display: inline-block; border: none; box-shadow: 0 4px 6px rgba(37, 99, 235, 0.2);
        }
        .btn:hover { transform: translateY(-2px); background-color: #1d4ed8; box-shadow: 0 7px 10px rgba(37, 99, 235, 0.3); }
        .btn-secondary { background-color: #64748b; box-shadow: 0 4px 6px rgba(100, 116, 139, 0.2); }
        .btn-secondary:hover { background-color: #475569; box-shadow: 0 7px 10px rgba(100, 116, 139, 0.3); }
        .btn-disabled { background-color: #94a3b8; cursor: not-allowed; opacity: 0.7; }
        .btn-disabled:hover { transform: none; box-shadow: 0 4px 6px rgba(100, 116, 139, 0.2); }

        .file-input-label { 
            border: 2px dashed #cbd5e1; padding: 2rem; text-align: center; cursor: pointer; border-radius: 0.5rem;
            transition: background-color 0.2s, border-color 0.2s;
        }
        .dark .file-input-label { border-color: #475569; }
        .file-input-label:hover, .drag-over { background-color: white; border-color: #2563eb; }
        .dark .file-input-label:hover, .dark .drag-over { background-color: #334155; border-color: #3b82f6; }

        .score-circle {
            width: 100px; height: 100px; border-radius: 50%; display: flex; align-items: center; justify-content: center;
            font-size: 1.5rem; font-weight: 800; color: white; transition: all 0.3s;
        }

        .tab-panel { animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        #signature-canvas { cursor: crosshair; border: 2px dashed #cbd5e1; border-radius: 0.5rem; }
        .dark #signature-canvas { border-color: #475569; background-color: #334155;}

        .tabs-container::-webkit-scrollbar { display: none; }
        .tabs-container { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="text-slate-900 dark:text-slate-200">

    <div id="loader-overlay" class="hidden fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center">
        <div class="loader"></div>
        <p id="loader-text" class="text-white text-lg ml-4 font-semibold">Processing...</p>
    </div>
    
    <div class="container mx-auto p-4 md:p-8 max-w-7xl">
        <header class="relative text-center mb-10">
            <div class="absolute top-0 right-0 flex items-center space-x-2 md:space-x-4">
                <a href="https://www.buymeacoffee.com/aimzworld007" target="_blank" class="text-sm font-semibold text-slate-700 dark:text-slate-400 hover:text-blue-500 transition-colors hidden md:inline-block" data-lang="support">Support this tool ‚òï</a>
                <select id="language-selector" class="text-sm rounded-md border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 focus:ring-blue-500 focus:border-blue-500 py-1">
                    <option value="en">English</option>
                    <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
                </select>
                <button id="dark-mode-toggle" class="p-2 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300">
                    <span id="sun-icon">‚òÄÔ∏è</span>
                    <span id="moon-icon" class="hidden">üåô</span>
                </button>
            </div>
            <div class="inline-block bg-white dark:bg-slate-800 p-4 rounded-xl shadow-md mb-4">
                 <svg class="w-12 h-12 text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.286Zm0 13.036h.008v.008h-.008v-.008Z" /></svg>
            </div>
            <h1 class="text-4xl md:text-5xl font-extrabold text-black dark:text-white" data-lang="main-title">Professional ICAO Photo Suite</h1>
            <p class="text-lg text-slate-700 dark:text-slate-400 mt-2 max-w-3xl mx-auto" data-lang="main-subtitle">Your all-in-one solution to verify, perfect, and manage photos & documents for official applications.</p>
        </header>

        <div class="main-card">
            <div class="border-b border-slate-200 dark:border-slate-700">
                <nav class="tabs-container -mb-px flex space-x-1 md:space-x-4 px-2 md:px-6 overflow-x-auto" id="tab-nav">
                    <button class="tab active" data-tab="icao" data-lang="tab-icao">ICAO Check</button>
                    <button class="tab" data-tab="ai-magic" data-lang="tab-ai-magic">‚ú® AI Magic Fixes</button>
                    <button class="tab" data-tab="ai-studio" data-lang="tab-ai-studio">AI Studio</button>
                    <button class="tab" data-tab="editor" data-lang="tab-editor">Editor</button>
                    <button class="tab" data-tab="pdf" data-lang="tab-pdf">PDF Tools</button>
                    <button class="tab" data-tab="image" data-lang="tab-image">Image Tools</button>
                    <button class="tab" data-tab="tips" data-lang="tab-tips">Tips & Examples</button>
                </nav>
            </div>

            <div class="p-4 md:p-8" id="tab-content-container">
                <!-- All tab content will be dynamically inserted by JS for cleaner code -->
            </div>
            
            <div class="border-t border-slate-200 dark:border-slate-700 mt-6 p-4 text-center">
                <p class="text-xs text-slate-500 dark:text-slate-500" data-lang="sponsored-ad">Sponsored Ad</p>
                <div class="border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-lg h-24 mt-2 flex items-center justify-center">
                    <p class="text-slate-400 dark:text-slate-500">Ad space available</p>
                </div>
            </div>
        </div>

        <div id="output-section" class="mt-10 hidden">
            <h2 class="text-2xl font-bold text-center mb-4 dark:text-white" data-lang="files-ready">Your Files are Ready</h2>
            <div id="output-container" class="bg-white dark:bg-slate-800 p-4 rounded-lg shadow-lg grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4"></div>
        </div>
        
        <footer class="text-center mt-12 py-6">
            <p class="text-slate-600 dark:text-slate-400">Made with ‚ù§Ô∏è by <a href="https://www.facebook.com/aimzworld007" target="_blank" class="font-semibold text-blue-600 dark:text-blue-400 hover:underline">Aimzit</a></p>
        </footer>
    </div>

    <script>
    // --- Main App Initialization ---
    function initializeApp() {
        if (typeof PDFLib === 'undefined' || typeof pdfjsLib === 'undefined' || typeof faceapi === 'undefined') {
            setTimeout(initializeApp, 100); // Wait for deferred scripts
            return;
        }
        
        const { PDFDocument, rgb, degrees } = PDFLib;
        pdfjsLib.GlobalWorkerOptions.workerSrc = `https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.worker.min.js`;
        
        // --- Dark Mode & Language ---
        const darkModeToggle = document.getElementById('dark-mode-toggle');
        const sunIcon = document.getElementById('sun-icon');
        const moonIcon = document.getElementById('moon-icon');
        const applyTheme = (theme) => {
            if (theme === 'dark') {
                document.documentElement.classList.add('dark');
                sunIcon.classList.add('hidden');
                moonIcon.classList.remove('hidden');
            } else {
                document.documentElement.classList.remove('dark');
                sunIcon.classList.remove('hidden');
                moonIcon.classList.add('hidden');
            }
        };
        darkModeToggle.addEventListener('click', () => {
            const newTheme = document.documentElement.classList.contains('dark') ? 'light' : 'dark';
            localStorage.setItem('theme', newTheme);
            applyTheme(newTheme);
        });
        const initialTheme = localStorage.getItem('theme') || 'dark';
        applyTheme(initialTheme);
        
        const translations = {
            en: {
                "support": "Support this tool ‚òï", "main-title": "Professional ICAO Photo Suite", "main-subtitle": "Your all-in-one solution to verify, perfect, and manage photos & documents for official applications.",
                "tab-icao": "ICAO Check", "tab-ai-magic": "‚ú® AI Magic Fixes", "tab-ai-studio": "AI Studio", "tab-editor": "Editor", "tab-upscale": "Upscale & Enhance", "tab-pdf": "PDF Tools", "tab-image": "Image Tools", "tab-tips": "Tips & Examples",
                "upload-cta": "Click to upload", "upload-dnd": " or drag & drop", "photo-preview": "Photo Preview", "verify-btn": "Verify Photo", "example-photo-link": "See an example of a perfect photo",
                "results-title": "Verification Results", "ai-report-title": "AI Photo Report", "ai-report-subtitle": "Get detailed, human-like feedback on your photo's compliance.", "ai-report-btn": "Get AI Report",
                "ai-bg-title": "AI Background Changer", "ai-bg-subtitle": "Magically replace your photo's background with one click.", "ai-bg-btn": "Change Background",
                "ai-title": "AI-Powered Photo Transformation", "ai-subtitle": "Upload any portrait photo and our AI will generate a professional, studio-quality ID photograph compliant with ICAO standards.",
                "ai-upload": "Upload Your Photo", "input-preview": "Input Preview", "output-preview": "AI Generated Output", "ai-generate-btn": "Generate Professional Photo",
                "editor-upload": "Upload a photo to start editing", "undo": "Undo", "redo": "Redo", "editor-download": "Download Edited Photo", "one-click-tools": "One-Click Tools", "crop-ratio": "Crop to ID Ratio", "white-bg": "White Background", "auto-enhance": "Auto-Enhance",
                "manual-tools": "Manual Tools", "rotate-left": "Rotate Left", "flip-h": "Flip Horizontal", "custom-size": "Custom Size (pixels)", "resize": "Resize", "adjustments": "Adjustments", "brightness": "Brightness", "contrast": "Contrast", "sharpness": "Sharpness", "saturation": "Saturation",
                "upscale-title": "AI Image Upscale & Enhance", "upscale-subtitle": "Improve photo resolution and clarity. Ideal for fixing blurry or low-quality images.", "original-image": "Original Image", "enhanced-image": "Enhanced Image",
                "upscale-upload": "Upload Photo to Enhance", "upscale-output-placeholder": "Enhanced output will appear here", "upscale-button": "Upscale Image (2x)", "download-enhanced": "Download Enhanced Photo",
                "pdf-to-img-title": "PDF to Image Converter", "select-pdf": "Select PDF to Convert", "img-to-pdf-title": "Image to PDF Converter", "select-images": "Select Images to Convert", "pdf-combine-title": "PDF Combiner", "select-pdfs": "Select PDFs to Combine",
                "signature-title": "Digital Signature", "signature-subtitle": "Draw your signature, save it, and apply it to a PDF.", "clear": "Clear", "save-signature": "Save Signature", "apply-to-pdf": "Apply to PDF",
                "merge-title": "Merge Two Photos", "photo1": "Photo 1", "photo2": "Photo 2", "merge-v": "Merge Vertically", "merge-h": "Merge Horizontally",
                "compress-title": "Image Compression", "compress-subtitle": "Upload an image to reduce its file size.", "compress-upload": "Upload Image to Compress", "high-q": "High Quality", "medium-q": "Medium Quality", "low-q": "Low Quality",
                "tips-title": "Tips for a Perfect ICAO Photo", "tip1": "Use a plain white or off-white background with no shadows.", "tip2": "Face the camera directly with a neutral expression (no smiling).", "tip3": "Ensure your whole face from top of hair to bottom of chin is visible.", "tip4": "Take off glasses if possible. If not, ensure there's no glare on the lenses.", "tip5": "Lighting should be even on your face, avoiding strong shadows.",
                "examples-title": "Compliant Examples", "sponsored-ad": "Sponsored Ad", "files-ready": "Your Files are Ready", "install-app": "Install App",
                "width": "Width", "height": "Height"
            },
            ar: {
                // Arabic translations
            }
        };

        const languageSelector = document.getElementById('language-selector');
        const setLanguage = (lang) => {
            document.documentElement.lang = lang;
            document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
            document.querySelectorAll('[data-lang]').forEach(el => {
                const key = el.getAttribute('data-lang');
                if (translations[lang] && translations[lang][key]) {
                    el.textContent = translations[lang][key];
                } else if (translations['en'][key]) { // Fallback to English
                    el.textContent = translations['en'][key];
                }
            });
             document.querySelectorAll('[data-lang-placeholder]').forEach(el => {
                const key = el.getAttribute('data-lang-placeholder');
                 if (translations[lang] && translations[lang][key]) {
                    el.placeholder = translations[lang][key];
                } else if (translations['en'][key]) {
                    el.placeholder = translations['en'][key];
                }
            });
        };

        languageSelector.addEventListener('change', (e) => {
            setLanguage(e.target.value);
            localStorage.setItem('language', e.target.value);
        });

        const savedLang = localStorage.getItem('language') || 'en';
        languageSelector.value = savedLang;
        setLanguage(savedLang);

        // --- ALL APP LOGIC IS PLACED HERE ---
    }

    document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
</body>
</html>

